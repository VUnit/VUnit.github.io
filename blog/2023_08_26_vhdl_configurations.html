<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="author" title="About these documents" href="../about.html"><link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="VUnit Phases" href="2023_04_01_vunit_phases.html"><link rel="prev" title="Blog" href="index.html">
        <link rel="prefetch" href="../_static/VUnit_logo.png" as="image">

    <link rel="shortcut icon" href="../_static/vunit.ico"><!-- Generated with Sphinx 7.3.7 and Furo 2025.12.19 -->
        <title>Improved Support for VHDL Configurations and OSVVM - VUnit documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/brands.min.css" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">VUnit  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/VUnit_logo.png" alt="Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Blog</a><input aria-label="Toggle navigation of Blog" checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Improved Support for VHDL Configurations and OSVVM</a></li>
<li class="toctree-l2"><a class="reference internal" href="2023_04_01_vunit_phases.html">VUnit Phases</a></li>
<li class="toctree-l2"><a class="reference internal" href="2023_03_31_vunit_events.html">VUnit Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="2022_09_19_vunit_user_conference.html">VUnit User Conference</a></li>
<li class="toctree-l2"><a class="reference internal" href="2022_09_06_vunit_and_other_frameworks.html">FAQ What is VUnit’s Relation to Other Verification Frameworks?</a></li>
<li class="toctree-l2"><a class="reference internal" href="2020_08_12_continuous_integration_with_vunit_action_in_10_lines_of_code.html">Continuous Integration With VUnit Action in 10 Lines of Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="2018_09_22_sigasi_adds_full_vunit_support.html">Sigasi Adds Full VUnit Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="2018_07_22_sigasi_deepens_its_commitment_to_the_vunit_testing_framework.html">Sigasi Deepens Its Commitment to the VUnit Testing Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="2018_03_22_vunit_community_developed_bfms.html">VUnit Community Developed BFMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="2018_02_12_vunit3.html">VUnit 3.0</a></li>
<li class="toctree-l2"><a class="reference internal" href="2017_12_14_vunit_bfms_as_simple_as_emailing.html">VUnit BFMs - as Simple as Emailing</a></li>
<li class="toctree-l2"><a class="reference internal" href="2017_11_23_vunit_matlab_integration.html">VUnit Matlab Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="2017_11_07_vunit_3_0_while_waiting_for_vhdl_2017.html">VUnit 3.0 - While Waiting for VHDL-2017</a></li>
<li class="toctree-l2"><a class="reference internal" href="2017_10_31_vunit_3_0_color_logging.html">VUnit 3.0 Color Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="2017_09_28_sigasi_adds_support_for_vunit_testing_framework.html">Sigasi Adds Support for VUnit Testing Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="2017_06_03_enable_your_simulator_to_handle_complex_top_level_generics.html">Enable Your Simulator to Handle Complex Top-Level Generics</a></li>
<li class="toctree-l2"><a class="reference internal" href="2017_01_12_vunit_getting_started_1_2_3.html">VUnit - Getting Started 1-2-3</a></li>
<li class="toctree-l2"><a class="reference internal" href="2016_11_22_vunit_the_best_value_for_initial_effort_part3.html">VUnit - The Best Value for Initial Effort - Part 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="2016_11_16_vunit_the_best_value_for_initial_effort_part2.html">VUnit - The Best Value for Initial Effort - Part 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="2016_11_15_vunit_the_best_value_for_initial_effort_part1.html">VUnit - The Best Value for Initial Effort - Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="2016_08_08_making_osvvm_a_submodule.html">Making OSVVM a Git Submodule</a></li>
<li class="toctree-l2"><a class="reference internal" href="2016_02_21_improving_vhdl_testbench_design_with_message_passing.html">Improving VHDL Testbench Design with Message Passing</a></li>
<li class="toctree-l2"><a class="reference internal" href="2016_02_01_website_updates.html">Website Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="2016_01_29_chat_with_vunit_users_and_developers.html">Chat with VUnit Users and Developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="2016_01_26_welcome_to_our_new_website.html">Welcome to Our New Website</a></li>
<li class="toctree-l2"><a class="reference internal" href="2015_12_15_free_and_open_source_verification_with_vunit_and_ghdl.html">Free and Open Source Verification with VUnit and GHDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="2015_10_08_who_is_using_UVM.html">Who’s Using UVM (or Not) for FPGA Development, and Why?</a></li>
<li class="toctree-l2"><a class="reference internal" href="2015_09_24_short_introduction_to_vunit.html">Short Introduction to VUnit</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about.html">What is VUnit?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing.html">Installing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testimonials/testimonials.html">Testimonials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../id/user_guide.html">Identity Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../logging/user_guide.html">Logging Library User Guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../check/user_guide.html">Check Library User Guide</a><input aria-label="Toggle navigation of Check Library User Guide" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../check/check_api.html"><em>check</em> package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../check/checker_pkg.html"><em>checker</em> package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../run/user_guide.html">Run Library User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../com/user_guide.html">Communication Library User Guide</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../verification_components/user_guide.html">Verification Components User Guide</a><input aria-label="Toggle navigation of Verification Components User Guide" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../verification_components/memory_model.html">Memory Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../verification_components/vci.html">Bus Master VCI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../verification_components/vci.html#stream-master-vci">Stream Master VCI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../verification_components/vci.html#stream-slave-vci">Stream Slave VCI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../verification_components/vci.html#synchronization-vci">Synchronization VCI</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../data_types/user_guide.html">Data Types User Guide</a><input aria-label="Toggle navigation of Data Types User Guide" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_types/event_user_guide.html">VUnit Events</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_types/queue.html"><em>queue</em> package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_types/integer_array.html"><em>integer_array</em> package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_types/ext_string.html"><em>external string</em> package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_types/ext_integer_vector.html"><em>external integer vector</em> package</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command Line Interface</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../py/ui.html">Python Interface</a><input aria-label="Toggle navigation of Python Interface" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><span class="icon"><svg><use href="#svg-arrow-right"></use></svg></span></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../py/vunit.html">vunit.ui</a></li>
<li class="toctree-l2"><a class="reference internal" href="../py/opts.html">Compilation Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="../py/opts.html#simulation-options">Simulation Options</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hdl_libraries.html">HDL Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Continuous Integration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ci/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ci/script.html">Setup/configuration scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ci/container.html">Containers and/or Virtual Machines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ci/manual.html">Manual setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ci/usecases.html">Practical use cases</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="https://github.com/VUnit/vunit/blob/master/docs/blog/2023_08_26_vhdl_configurations.rst?plain=true" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div><div class="edit-this-page">
  <a class="muted-link" href="https://github.com/VUnit/vunit/edit/master/docs/blog/2023_08_26_vhdl_configurations.rst" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="improved-support-for-vhdl-configurations-and-osvvm">
<h1>Improved Support for VHDL Configurations and OSVVM<a class="headerlink" href="#improved-support-for-vhdl-configurations-and-osvvm" title="Link to this heading">¶</a></h1>
<p>For quite some time, several initiatives have been underway to improve the integration between VUnit and OSVVM. Examples
of these efforts are the <a class="reference external" href="https://vunit.github.io/logging/user_guide.html#external-logging-framework-integration">external logging framework integration feature</a> and the OSVVM pull request
<a class="reference external" href="https://github.com/OSVVM/OSVVM/pull/81">#81</a>.</p>
<p>Another example is the introduction of support for top-level VHDL configurations which serves several purposes, for
example:</p>
<ol class="arabic simple">
<li><p>Enabling the selection of the Device Under Test (DUT) to be used in a VUnit testbench.</p></li>
<li><p>Direct support for running conventional OSVVM testbenches within the VUnit framework.</p></li>
</ol>
<p>In this blog, we will primarily focus on top-level configurations but before delving into the specifics of these use cases, we will describe how VUnit addressed these issues in the past.</p>
<section id="selecting-dut-using-generics">
<h2>Selecting DUT Using Generics<a class="headerlink" href="#selecting-dut-using-generics" title="Link to this heading">¶</a></h2>
<p>Sometimes the VHDL DUT comes in different variants (architectures) and there is a need to verify all of these with the
same testbench. It could be an FPGA and an ASIC implementation or an RTL and a behavioral architecture. Before
supporting VHDL configurations, VUnit addressed this issue with a combination of generics and an if-generate statement
as showed in the example below. For the purpose of this blog, we have removed the complexities typically found in
real-world designs and chosen to focus on the fundamental principles. Thus, we will use a simple variable-width
flip-flop as the DUT for our demonstrations.</p>
<div class="highlight"><pre><span></span><span class="k">entity</span><span class="w"> </span><span class="nc">tb_selecting_dut_with_generics</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">generic</span><span class="p">(</span>
<span class="w">    </span><span class="n">runner_cfg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">width</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">positive</span><span class="p">;</span>
<span class="w">    </span><span class="n">dff_arch</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">  </span><span class="p">);</span>
<span class="k">end</span><span class="w"> </span><span class="k">entity</span><span class="p">;</span>

<span class="k">architecture</span><span class="w"> </span><span class="nc">tb</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">tb_selecting_dut_with_generics</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="p">...</span>
<span class="k">begin</span>
<span class="w">  </span><span class="n">test_runner</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">process</span>
<span class="w">  </span><span class="k">begin</span>
<span class="w">    </span><span class="n">test_runner_setup</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span><span class="w"> </span><span class="n">runner_cfg</span><span class="p">);</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">test_suite</span><span class="w"> </span><span class="k">loop</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="n">run</span><span class="p">(</span><span class="s">&quot;Test reset&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">      </span><span class="k">elsif</span><span class="w"> </span><span class="n">run</span><span class="p">(</span><span class="s">&quot;Test state change&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">      </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="p">;</span>
<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="k">loop</span><span class="p">;</span>

<span class="w">    </span><span class="n">test_runner_cleanup</span><span class="p">(</span><span class="n">runner</span><span class="p">);</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">process</span><span class="p">;</span>

<span class="w">  </span><span class="n">test_runner_watchdog</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">clk_period</span><span class="p">);</span>

<span class="w">  </span><span class="n">test_fixture</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">block</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">begin</span>
<span class="w">    </span><span class="n">clk</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">clk</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">clk_period</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>

<span class="w">    </span><span class="n">dut_selection</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">dff_arch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;rtl&quot;</span><span class="w"> </span><span class="k">generate</span>
<span class="w">      </span><span class="n">dut</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">entity</span><span class="w"> </span><span class="nc">work</span><span class="p">.</span><span class="n">dff</span><span class="p">(</span><span class="n">rtl</span><span class="p">)</span>
<span class="w">        </span><span class="k">generic</span><span class="w"> </span><span class="k">map</span><span class="p">(</span>
<span class="w">          </span><span class="n">width</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">width</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">        </span><span class="k">port</span><span class="w"> </span><span class="k">map</span><span class="p">(</span>
<span class="w">          </span><span class="n">clk</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
<span class="w">          </span><span class="n">reset</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
<span class="w">          </span><span class="n">d</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
<span class="w">          </span><span class="n">q</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">q</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">    </span><span class="k">elsif</span><span class="w"> </span><span class="n">dff_arch</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;behavioral&quot;</span><span class="w"> </span><span class="k">generate</span>
<span class="w">      </span><span class="n">dut</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">entity</span><span class="w"> </span><span class="nc">work</span><span class="p">.</span><span class="n">dff</span><span class="p">(</span><span class="n">behavioral</span><span class="p">)</span>
<span class="w">        </span><span class="k">generic</span><span class="w"> </span><span class="k">map</span><span class="p">(</span>
<span class="w">          </span><span class="n">width</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">width</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">        </span><span class="k">port</span><span class="w"> </span><span class="k">map</span><span class="p">(</span>
<span class="w">          </span><span class="n">clk</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
<span class="w">          </span><span class="n">reset</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
<span class="w">          </span><span class="n">d</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
<span class="w">          </span><span class="n">q</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">q</span>
<span class="w">        </span><span class="p">);</span>

<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">generate</span>
<span class="w">      </span><span class="n">error</span><span class="p">(</span><span class="s">&quot;Unknown DFF architecture&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="k">generate</span><span class="p">;</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">block</span><span class="p">;</span>
<span class="k">end</span><span class="w"> </span><span class="k">architecture</span><span class="p">;</span>
</pre></div>
<p>This approach is straightforward: simply copy and paste the flip-flop instantiation, but modify the architecture to use
based on the <code class="docutils literal notranslate"><span class="pre">dut_arch</span></code> generic. While the approach is simple it also introduces code duplication which can be a bit
dangerous. In this case, since the copies are placed adjacent to each other, the risk of inadvertently changing one
without updating the other is somewhat mitigated.</p>
<p>If your DUT has numerous ports, you can consider leveraging the VHDL-2019 interface construct as a means to raise the
level of abstraction and reduce code duplication. This approach allows for a more concise representation of the design,
provided your simulator supports the latest VHDL standard.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There is a proposed update to the VHDL standard related to this topic as it would fully remove the code duplication.
<a class="reference external" href="https://gitlab.com/IEEE-P1076/VHDL-Issues/-/issues/235">Issue #235</a> proposes that a string should be possible
to use when specifying the architecture in an entity instantiation, i.e. <code class="docutils literal notranslate"><span class="pre">&quot;rtl&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;behavioral&quot;</span></code> rather than
<code class="docutils literal notranslate"><span class="pre">rtl</span></code> or <code class="docutils literal notranslate"><span class="pre">behavioral</span></code>. In our example we would simply have a single entity instantiation which architecture is
specified with the <code class="docutils literal notranslate"><span class="pre">dut_arch</span></code> generic.</p>
</div>
<p>The various settings of the <code class="docutils literal notranslate"><span class="pre">dut_arch</span></code> generic are handled with a VUnit configuration in the Python run script.
Initially, the use of both VUnit and VHDL configuration concepts may appear confusing, but we will soon see that a VHDL
configuration is a special case of the broader VUnit configuration concept. In this example, we are also testing the DUT
with multiple <code class="docutils literal notranslate"><span class="pre">width</span></code> settings. Note how we can use the <code class="docutils literal notranslate"><span class="pre">product</span></code> function from <code class="docutils literal notranslate"><span class="pre">itertools</span></code> to iterate over all
combinations of <code class="docutils literal notranslate"><span class="pre">dut_arch</span></code> and <code class="docutils literal notranslate"><span class="pre">width</span></code>. This is equivalent to two nested loops over these generics but scales better
as the number of generics to combine increases.</p>
<div class="highlight"><pre><span></span><span class="n">tb</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">test_bench</span><span class="p">(</span><span class="s2">&quot;tb_selecting_dut_with_generics&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">dut_arch</span><span class="p">,</span> <span class="n">width</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">([</span><span class="s2">&quot;rtl&quot;</span><span class="p">,</span> <span class="s2">&quot;behavioral&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">]):</span>
    <span class="n">tb</span><span class="o">.</span><span class="n">add_config</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dut_arch</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">generics</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">dff_arch</span><span class="o">=</span><span class="n">dut_arch</span><span class="p">),</span>
    <span class="p">)</span>
</pre></div>
<p>If we list all the tests, we will see that there are four for each test
case in the testbench, one for each combination of <code class="docutils literal notranslate"><span class="pre">dut_arch</span></code> and <code class="docutils literal notranslate"><span class="pre">width</span></code>:</p>
<div class="highlight" style="background: #002b36; color: #eee8d5;"><pre style="line-height: 125%; background: #002b36; color: #eee8d5;">> python run.py --list
lib.tb_selecting_dut_with_generics.rtl_8.Test reset
lib.tb_selecting_dut_with_generics.rtl_16.Test reset
lib.tb_selecting_dut_with_generics.behavioral_8.Test reset
lib.tb_selecting_dut_with_generics.behavioral_16.Test reset
lib.tb_selecting_dut_with_generics.rtl_8.Test state change
lib.tb_selecting_dut_with_generics.rtl_16.Test state change
lib.tb_selecting_dut_with_generics.behavioral_8.Test state change
lib.tb_selecting_dut_with_generics.behavioral_16.Test state change
Listed 8 tests
</pre></div>
</section>
<section id="selecting-dut-using-vhdl-configurations">
<h2>Selecting DUT Using VHDL Configurations<a class="headerlink" href="#selecting-dut-using-vhdl-configurations" title="Link to this heading">¶</a></h2>
<p>When using VHDL configurations we need three ingredients in our testbench</p>
<ol class="arabic simple">
<li><p>A component declaration for the DUT. In the example below it has been
placed in the declarative part of the testbench architecture but it
can also be placed in a separate package.</p></li>
<li><p>A component instantiation of the declared component. Note that the
<code class="docutils literal notranslate"><span class="pre">component</span></code> keyword is optional and can be excluded.</p></li>
<li><p>A configuration declaration for each DUT architecture</p></li>
</ol>
<div class="highlight"><pre><span></span><span class="k">entity</span><span class="w"> </span><span class="nc">tb_selecting_dut_with_vhdl_configuration</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">generic</span><span class="p">(</span>
<span class="w">    </span><span class="n">runner_cfg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">string</span><span class="p">;</span>
<span class="w">    </span><span class="n">width</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">positive</span>
<span class="w">  </span><span class="p">);</span>
<span class="k">end</span><span class="w"> </span><span class="k">entity</span><span class="p">;</span>

<span class="k">architecture</span><span class="w"> </span><span class="nc">tb</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">tb_selecting_dut_with_vhdl_configuration</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="p">...</span>

<span class="w">  </span><span class="c1">-- Component declaration</span>
<span class="w">  </span><span class="k">component</span><span class="w"> </span><span class="nc">dff</span><span class="w"> </span><span class="k">is</span>
<span class="w">    </span><span class="k">generic</span><span class="p">(</span>
<span class="w">      </span><span class="n">width</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">positive</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">width</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="k">port</span><span class="p">(</span>
<span class="w">      </span><span class="n">clk</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">std_logic</span><span class="p">;</span>
<span class="w">      </span><span class="n">reset</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">std_logic</span><span class="p">;</span>
<span class="w">      </span><span class="n">d</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">std_logic_vector</span><span class="p">(</span><span class="n">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">      </span><span class="n">q</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">std_logic_vector</span><span class="p">(</span><span class="n">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">component</span><span class="p">;</span>
<span class="k">begin</span>
<span class="w">  </span><span class="n">test_runner</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">process</span>
<span class="w">  </span><span class="k">begin</span>
<span class="w">    </span><span class="n">test_runner_setup</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span><span class="w"> </span><span class="n">runner_cfg</span><span class="p">);</span>

<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">test_suite</span><span class="w"> </span><span class="k">loop</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="n">run</span><span class="p">(</span><span class="s">&quot;Test reset&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">      </span><span class="k">elsif</span><span class="w"> </span><span class="n">run</span><span class="p">(</span><span class="s">&quot;Test state change&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">      </span><span class="k">end</span><span class="w"> </span><span class="k">if</span><span class="p">;</span>
<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="k">loop</span><span class="p">;</span>

<span class="w">    </span><span class="n">test_runner_cleanup</span><span class="p">(</span><span class="n">runner</span><span class="p">);</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">process</span><span class="p">;</span>

<span class="w">  </span><span class="n">test_runner_watchdog</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">clk_period</span><span class="p">);</span>

<span class="w">  </span><span class="n">test_fixture</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">block</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">begin</span>
<span class="w">    </span><span class="n">clk</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="n">clk</span><span class="w"> </span><span class="k">after</span><span class="w"> </span><span class="n">clk_period</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>

<span class="w">    </span><span class="c1">-- Component instantiation</span>
<span class="w">    </span><span class="n">dut</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">component</span><span class="w"> </span><span class="nc">dff</span>
<span class="w">      </span><span class="k">generic</span><span class="w"> </span><span class="k">map</span><span class="p">(</span>
<span class="w">        </span><span class="n">width</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">width</span>
<span class="w">      </span><span class="p">)</span>
<span class="w">      </span><span class="k">port</span><span class="w"> </span><span class="k">map</span><span class="p">(</span>
<span class="w">        </span><span class="n">clk</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
<span class="w">        </span><span class="n">reset</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
<span class="w">        </span><span class="n">d</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
<span class="w">        </span><span class="n">q</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">q</span>
<span class="w">      </span><span class="p">);</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">block</span><span class="p">;</span>
<span class="k">end</span><span class="w"> </span><span class="k">architecture</span><span class="p">;</span>

<span class="c1">-- Configuration declarations</span>
<span class="k">configuration</span><span class="w"> </span><span class="nc">rtl</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">tb_selecting_dut_with_vhdl_configuration</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">tb</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">test_fixture</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="n">dut</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">dff</span>
<span class="w">        </span><span class="k">use</span><span class="w"> </span><span class="k">entity</span><span class="w"> </span><span class="nn">work</span><span class="p">.</span><span class="n">dff</span><span class="p">(</span><span class="n">rtl</span><span class="p">);</span>
<span class="w">      </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>

<span class="k">configuration</span><span class="w"> </span><span class="nc">behavioral</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">tb_selecting_dut_with_vhdl_configuration</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">tb</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">test_fixture</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="n">dut</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">dff</span>
<span class="w">        </span><span class="k">use</span><span class="w"> </span><span class="k">entity</span><span class="w"> </span><span class="nn">work</span><span class="p">.</span><span class="n">dff</span><span class="p">(</span><span class="n">behavioral</span><span class="p">);</span>
<span class="w">      </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
</pre></div>
<p>Instead of assigning a generic to select our architecture, we now specify which VHDL configuration our VUnit configuration should use:</p>
<div class="highlight"><pre><span></span><span class="n">tb</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">test_bench</span><span class="p">(</span><span class="s2">&quot;tb_selecting_dut_with_vhdl_configuration&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">dut_arch</span><span class="p">,</span> <span class="n">width</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">([</span><span class="s2">&quot;rtl&quot;</span><span class="p">,</span> <span class="s2">&quot;behavioral&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">]):</span>
    <span class="n">tb</span><span class="o">.</span><span class="n">add_config</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dut_arch</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">generics</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">),</span>
        <span class="n">vhdl_configuration_name</span><span class="o">=</span><span class="n">dut_arch</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
<p>Incorporating VHDL configurations within VUnit configurations brings forth another advantage. From a VHDL point of view,
VHDL configurations are linked to entities, such as the testbench entity in our scenario. However, a VUnit configuration
can also be applied to specific test cases, opening up the possibility of using VHDL configurations at that finer level
of granularity. For instance, consider a situation where we have an FPGA and an ASIC implementation/architecure that
differ only in the memory IPs they use. In such a case, it might be sufficient to simulate only one of the architectures
for the test cases not involving memory operations.</p>
<p>To illustrate this using the flip-flop example, let’s create a test where we set <code class="docutils literal notranslate"><span class="pre">width</span></code> to 32 and exclusively
simulate it using the RTL architecture:</p>
<div class="highlight"><pre><span></span><span class="n">tb</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="s2">&quot;Test reset&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">add_config</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;rtl_32&quot;</span><span class="p">,</span> <span class="n">generics</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="mi">32</span><span class="p">),</span> <span class="n">vhdl_configuration_name</span><span class="o">=</span><span class="s2">&quot;rtl&quot;</span><span class="p">)</span>
</pre></div>
<p>Now, we have an additional entry in our list of tests:</p>
<div class="highlight" style="background: #002b36; color: #eee8d5;"><pre style="line-height: 125%; background: #002b36; color: #eee8d5;">> python run.py --list
lib.tb_selecting_dut_with_vhdl_configuration.rtl_8.Test reset
lib.tb_selecting_dut_with_vhdl_configuration.rtl_16.Test reset
lib.tb_selecting_dut_with_vhdl_configuration.behavioral_8.Test reset
lib.tb_selecting_dut_with_vhdl_configuration.behavioral_16.Test reset
lib.tb_selecting_dut_with_vhdl_configuration.rtl_32.Test reset
lib.tb_selecting_dut_with_vhdl_configuration.rtl_8.Test state change
lib.tb_selecting_dut_with_vhdl_configuration.rtl_16.Test state change
lib.tb_selecting_dut_with_vhdl_configuration.behavioral_8.Test state change
lib.tb_selecting_dut_with_vhdl_configuration.behavioral_16.Test state change
Listed 9 tests
</pre></div>
<p>Choosing between VHDL configurations and generics is primarily a matter of personal preference. The generic approach led
us to multiple direct entity instantiations and code duplication. However, the configuration approach demands a
component declaration, which essentially duplicates the DUT entity declaration. Additionally, VHDL configuration
declarations are also necessary.</p>
</section>
<section id="selecting-test-runner-using-vhdl-configurations">
<h2>Selecting Test Runner Using VHDL Configurations<a class="headerlink" href="#selecting-test-runner-using-vhdl-configurations" title="Link to this heading">¶</a></h2>
<p>In the previous examples, the VUnit test cases were located in a process called <code class="docutils literal notranslate"><span class="pre">test_runner</span></code> residing alongside the
DUT. This is the most straightforward arrangement, as it provides the test cases with direct access to the DUT’s
interface. An alternative approach involves encapsulating <code class="docutils literal notranslate"><span class="pre">test_runner</span></code> within an entity, which is subsequently
instantiated within the testbench. Such a <code class="docutils literal notranslate"><span class="pre">test_runner</span></code> entity needs access to the <code class="docutils literal notranslate"><span class="pre">runner_cfg</span></code> and <code class="docutils literal notranslate"><span class="pre">width</span></code>
generics, in addition to the <code class="docutils literal notranslate"><span class="pre">clk_period</span></code> constant and the interface ports of the DUT.</p>
<div class="highlight"><pre><span></span><span class="k">entity</span><span class="w"> </span><span class="nc">test_runner</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">generic</span><span class="p">(</span>
<span class="w">    </span><span class="n">clk_period</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">time</span><span class="p">;</span>
<span class="w">    </span><span class="n">width</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">positive</span><span class="p">;</span>
<span class="w">    </span><span class="n">nested_runner_cfg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">string</span>
<span class="w">  </span><span class="p">);</span>
<span class="w">  </span><span class="k">port</span><span class="p">(</span>
<span class="w">    </span><span class="n">reset</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">std_logic</span><span class="p">;</span>
<span class="w">    </span><span class="n">clk</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">std_logic</span><span class="p">;</span>
<span class="w">    </span><span class="n">d</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">out</span><span class="w"> </span><span class="kt">std_logic_vector</span><span class="p">(</span><span class="n">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">    </span><span class="n">q</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">std_logic_vector</span><span class="p">(</span><span class="n">width</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">downto</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">  </span><span class="p">);</span>
<span class="k">end</span><span class="w"> </span><span class="k">entity</span><span class="p">;</span>
</pre></div>
<p>Note that the runner configuration generic is called <code class="docutils literal notranslate"><span class="pre">nested_runner_cfg</span></code> and not <code class="docutils literal notranslate"><span class="pre">runner_cfg</span></code>. The reason is that
<code class="docutils literal notranslate"><span class="pre">runner_cfg</span></code> is the signature used to identify a testbench, the top-level of a simulation. The <code class="docutils literal notranslate"><span class="pre">test_runner</span></code> entity
is not a simulation top-level and must not be mistaken as such.</p>
<p>We can now replace the testbench <code class="docutils literal notranslate"><span class="pre">test_runner</span></code> process and watchdog with an instantiation of this component:</p>
<div class="highlight"><pre><span></span><span class="n">test_runner_inst</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">component</span><span class="w"> </span><span class="nc">test_runner</span>
<span class="w">  </span><span class="k">generic</span><span class="w"> </span><span class="k">map</span><span class="p">(</span>
<span class="w">    </span><span class="n">clk_period</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">clk_period</span><span class="p">,</span>
<span class="w">    </span><span class="n">width</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">width</span><span class="p">,</span>
<span class="w">    </span><span class="n">nested_runner_cfg</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">runner_cfg</span>
<span class="w">  </span><span class="p">)</span>
<span class="w">  </span><span class="k">port</span><span class="w"> </span><span class="k">map</span><span class="p">(</span>
<span class="w">    </span><span class="n">reset</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">reset</span><span class="p">,</span>
<span class="w">    </span><span class="n">clk</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">clk</span><span class="p">,</span>
<span class="w">    </span><span class="n">d</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">d</span><span class="p">,</span>
<span class="w">    </span><span class="n">q</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">q</span>
<span class="w">  </span><span class="p">);</span>
</pre></div>
<p>Having relocated <code class="docutils literal notranslate"><span class="pre">test_runner</span></code> into an entity, we can have VHDL configurations selecting which test runner to use, and
let each such test runner represent a single test. This setup is the conventional methodology seen in OSVVM
testbenches. With VUnit’s extended support for VHDL configurations, it becomes possible to keep that structure when
adding VUnit capabilities. For example, this is the architecture for the reset test:</p>
<div class="highlight"><pre><span></span><span class="k">architecture</span><span class="w"> </span><span class="nc">test_reset_architecture</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">test_runner</span><span class="w"> </span><span class="k">is</span>
<span class="k">begin</span>
<span class="w">  </span><span class="n">main</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">process</span>
<span class="w">  </span><span class="k">begin</span>
<span class="w">    </span><span class="n">test_runner_setup</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span><span class="w"> </span><span class="n">nested_runner_cfg</span><span class="p">);</span>

<span class="w">    </span><span class="c1">-- Test code here</span>

<span class="w">    </span><span class="n">test_runner_cleanup</span><span class="p">(</span><span class="n">runner</span><span class="p">);</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">process</span><span class="p">;</span>

<span class="w">  </span><span class="n">test_runner_watchdog</span><span class="p">(</span><span class="n">runner</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">clk_period</span><span class="p">);</span>
<span class="k">end</span><span class="p">;</span>
</pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using several configurations to select what test runner to use, each test runner can only contain a single test, i.e. no test cases specified by the use of the <code class="docutils literal notranslate"><span class="pre">run</span></code> function are allowed.</p>
</div>
<p>Below are the two configurations that select this particular test along with one of the <code class="docutils literal notranslate"><span class="pre">rtl</span></code> and <code class="docutils literal notranslate"><span class="pre">behavioral</span></code>
architectures for the DUT:</p>
<div class="highlight"><pre><span></span><span class="k">configuration</span><span class="w"> </span><span class="nc">test_reset_behavioral</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">tb_selecting_test_runner_with_vhdl_configuration</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">tb</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">test_runner_inst</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">test_runner</span>
<span class="w">      </span><span class="k">use</span><span class="w"> </span><span class="k">entity</span><span class="w"> </span><span class="nn">work</span><span class="p">.</span><span class="n">test_runner</span><span class="p">(</span><span class="n">test_reset_architecture</span><span class="p">);</span>
<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">test_fixture</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="n">dut</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">dff</span>
<span class="w">        </span><span class="k">use</span><span class="w"> </span><span class="k">entity</span><span class="w"> </span><span class="nn">work</span><span class="p">.</span><span class="n">dff</span><span class="p">(</span><span class="n">behavioral</span><span class="p">);</span>
<span class="w">      </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>

<span class="k">configuration</span><span class="w"> </span><span class="nc">test_reset_rtl</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="nc">tb_selecting_test_runner_with_vhdl_configuration</span><span class="w"> </span><span class="k">is</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">tb</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">test_runner_inst</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">test_runner</span>
<span class="w">      </span><span class="k">use</span><span class="w"> </span><span class="k">entity</span><span class="w"> </span><span class="nn">work</span><span class="p">.</span><span class="n">test_runner</span><span class="p">(</span><span class="n">test_reset_architecture</span><span class="p">);</span>
<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>

<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">test_fixture</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="n">dut</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">dff</span>
<span class="w">        </span><span class="k">use</span><span class="w"> </span><span class="k">entity</span><span class="w"> </span><span class="nn">work</span><span class="p">.</span><span class="n">dff</span><span class="p">(</span><span class="n">rtl</span><span class="p">);</span>
<span class="w">      </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="w">    </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="w">  </span><span class="k">end</span><span class="w"> </span><span class="k">for</span><span class="p">;</span>
<span class="k">end</span><span class="p">;</span>
</pre></div>
<p>This example highlights a drawback of VHDL configurations: every combination of architectures to use in a test has to be
manually created. When we use generics and if generate statements to select architectures, we create all combinations
<strong>programatically</strong> in the Python script using the <code class="docutils literal notranslate"><span class="pre">itertools.product</span></code> function. Despite this, Python can continue to
play a role in alleviating certain aspects of the combinatorial workload:</p>
<div class="highlight"><pre><span></span><span class="n">tb</span> <span class="o">=</span> <span class="n">lib</span><span class="o">.</span><span class="n">test_bench</span><span class="p">(</span><span class="s2">&quot;tb_selecting_test_runner_with_vhdl_configuration&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">dut_arch</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">test_case_name</span> <span class="ow">in</span> <span class="n">itertools</span><span class="o">.</span><span class="n">product</span><span class="p">(</span>
    <span class="p">[</span><span class="s2">&quot;rtl&quot;</span><span class="p">,</span> <span class="s2">&quot;behavioral&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;test_reset&quot;</span><span class="p">,</span> <span class="s2">&quot;test_state_change&quot;</span><span class="p">]</span>
<span class="p">):</span>
    <span class="n">vhdl_configuration_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">test_case_name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">dut_arch</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">tb</span><span class="o">.</span><span class="n">add_config</span><span class="p">(</span>
        <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">vhdl_configuration_name</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">width</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">generics</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">),</span>
        <span class="n">vhdl_configuration_name</span><span class="o">=</span><span class="n">vhdl_configuration_name</span><span class="p">,</span>
    <span class="p">)</span>
</pre></div>
<div class="highlight" style="background: #002b36; color: #eee8d5;"><pre style="line-height: 125%; background: #002b36; color: #eee8d5;">> python run.py --list
lib.tb_selecting_test_runner_with_vhdl_configuration.test_reset_rtl_8
lib.tb_selecting_test_runner_with_vhdl_configuration.test_state_change_rtl_8
lib.tb_selecting_test_runner_with_vhdl_configuration.test_reset_rtl_16
lib.tb_selecting_test_runner_with_vhdl_configuration.test_state_change_rtl_16
lib.tb_selecting_test_runner_with_vhdl_configuration.test_reset_behavioral_8
lib.tb_selecting_test_runner_with_vhdl_configuration.test_state_change_behavioral_8
lib.tb_selecting_test_runner_with_vhdl_configuration.test_reset_behavioral_16
lib.tb_selecting_test_runner_with_vhdl_configuration.test_state_change_behavioral_16
Listed 8 tests
</pre></div>
<p>That concludes our discussion for now. As always, we highly value your feedback and appreciate any insights you might have to offer.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="2023_04_01_vunit_phases.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">VUnit Phases</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Blog</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2014-2024, Lars Asplund
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link fa-solid fa-brands fa-twitter" href="https://twitter.com/VUnitFramework" aria-label="Twitter @VUnitFramework"></a>
              <a class="muted-link fa-solid fa-brands fa-gitter" href="https://gitter.im/VUnit/vunit" aria-label="Gitter VUnit/vunit"></a>
              <a class="muted-link fa-solid fa-brands fa-github" href="https://github.com/VUnit/vunit" aria-label="GitHub VUnit/vunit"></a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Improved Support for VHDL Configurations and OSVVM</a><ul>
<li><a class="reference internal" href="#selecting-dut-using-generics">Selecting DUT Using Generics</a></li>
<li><a class="reference internal" href="#selecting-dut-using-vhdl-configurations">Selecting DUT Using VHDL Configurations</a></li>
<li><a class="reference internal" href="#selecting-test-runner-using-vhdl-configurations">Selecting Test Runner Using VHDL Configurations</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>